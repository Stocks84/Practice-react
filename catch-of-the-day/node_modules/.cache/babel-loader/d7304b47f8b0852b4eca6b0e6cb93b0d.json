{"ast":null,"code":"var _jsxFileName = \"/workspace/Practice-react/catch-of-the-day/src/components/Inventory.js\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport firebase from \"firebase\";\nimport AddFishForm from \"./AddFishForm\";\nimport EditFishForm from \"./EditFishForm\";\nimport Login from \"./Login\";\nimport base, { firebaseApp } from \"../base\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass Inventory extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      uid: null,\n      owner: null\n    };\n    this.authHandler = async authData => {\n      // 1 .Look up the current store in the firebase database\n      const store = await base.fetch(this.props.storeId, {\n        context: this\n      });\n      console.log(store);\n      // 2. Claim it if there is no owner\n      if (!store.owner) {\n        // save it as our own\n        await base.post(\"\".concat(this.props.storeId, \"/owner\"), {\n          data: authData.user.uid\n        });\n      }\n      // 3. Set the state of the inventory component to reflect the current user\n      this.setState({\n        uid: authData.user.uid,\n        owner: store.owner || authData.user.uid\n      });\n    };\n    this.authenticate = provider => {\n      const authProvider = new firebase.auth[\"\".concat(provider, \"AuthProvider\")]();\n      firebaseApp.auth().signInWithPopup(authProvider).then(this.authHandler);\n    };\n    this.logout = async () => {\n      console.log(\"Logging out!\");\n      await firebase.auth().signOut();\n      this.setState({\n        uid: null\n      });\n    };\n  }\n  componentDidMount() {\n    firebase.auth().onAuthStateChanged(user => {\n      if (user) {\n        this.authHandler({\n          user\n        });\n      }\n    });\n  }\n  render() {\n    const logout = /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: this.logout,\n      children: \"Log Out!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 20\n    }, this);\n\n    // 1. Check if they are logged in\n    if (!this.state.uid) {\n      return /*#__PURE__*/_jsxDEV(Login, {\n        authenticate: this.authenticate\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 14\n      }, this);\n    }\n\n    // 2. check if they are not the owner of the store\n    if (this.state.uid !== this.state.owner) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Sorry you are not the owner!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this), logout]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this);\n    }\n\n    // 3. They must be the owner, just render the inventory\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"inventory\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Inventory\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), logout, Object.keys(this.props.fishes).map(key => /*#__PURE__*/_jsxDEV(EditFishForm, {\n        index: key,\n        fish: this.props.fishes[key],\n        updateFish: this.props.updateFish,\n        deleteFish: this.props.deleteFish\n      }, key, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 11\n      }, this)), /*#__PURE__*/_jsxDEV(AddFishForm, {\n        addFish: this.props.addFish\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: this.props.loadSampleFishes,\n        children: \"Load Sample Fishes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this);\n  }\n}\nInventory.propTypes = {\n  fishes: PropTypes.object,\n  updateFish: PropTypes.func,\n  deleteFish: PropTypes.func,\n  loadSampleFishes: PropTypes.func,\n  addFish: PropTypes.func\n};\nexport default Inventory;","map":{"version":3,"names":["React","PropTypes","firebase","AddFishForm","EditFishForm","Login","base","firebaseApp","jsxDEV","_jsxDEV","Inventory","Component","constructor","arguments","state","uid","owner","authHandler","authData","store","fetch","props","storeId","context","console","log","post","concat","data","user","setState","authenticate","provider","authProvider","auth","signInWithPopup","then","logout","signOut","componentDidMount","onAuthStateChanged","render","onClick","children","fileName","_jsxFileName","lineNumber","columnNumber","className","Object","keys","fishes","map","key","index","fish","updateFish","deleteFish","addFish","loadSampleFishes","propTypes","object","func"],"sources":["/workspace/Practice-react/catch-of-the-day/src/components/Inventory.js"],"sourcesContent":["import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport firebase from \"firebase\";\nimport AddFishForm from \"./AddFishForm\";\nimport EditFishForm from \"./EditFishForm\";\nimport Login from \"./Login\";\nimport base, { firebaseApp } from \"../base\";\n\nclass Inventory extends React.Component {\n  static propTypes = {\n    fishes: PropTypes.object,\n    updateFish: PropTypes.func,\n    deleteFish: PropTypes.func,\n    loadSampleFishes: PropTypes.func,\n    addFish: PropTypes.func\n  };\n\n  state = {\n    uid: null,\n    owner: null\n  };\n\n  componentDidMount() {\n    firebase.auth().onAuthStateChanged(user => {\n      if (user) {\n        this.authHandler({ user });\n      }\n    });\n  }\n\n  authHandler = async authData => {\n    // 1 .Look up the current store in the firebase database\n    const store = await base.fetch(this.props.storeId, { context: this });\n    console.log(store);\n    // 2. Claim it if there is no owner\n    if (!store.owner) {\n      // save it as our own\n      await base.post(`${this.props.storeId}/owner`, {\n        data: authData.user.uid\n      });\n    }\n    // 3. Set the state of the inventory component to reflect the current user\n    this.setState({\n      uid: authData.user.uid,\n      owner: store.owner || authData.user.uid\n    });\n  };\n\n  authenticate = provider => {\n    const authProvider = new firebase.auth[`${provider}AuthProvider`]();\n    firebaseApp\n      .auth()\n      .signInWithPopup(authProvider)\n      .then(this.authHandler);\n  };\n\n  logout = async () => {\n    console.log(\"Logging out!\");\n    await firebase.auth().signOut();\n    this.setState({ uid: null });\n  };\n\n  render() {\n    const logout = <button onClick={this.logout}>Log Out!</button>;\n\n    // 1. Check if they are logged in\n    if (!this.state.uid) {\n      return <Login authenticate={this.authenticate} />;\n    }\n\n    // 2. check if they are not the owner of the store\n    if (this.state.uid !== this.state.owner) {\n      return (\n        <div>\n          <p>Sorry you are not the owner!</p>\n          {logout}\n        </div>\n      );\n    }\n\n    // 3. They must be the owner, just render the inventory\n    return (\n      <div className=\"inventory\">\n        <h2>Inventory</h2>\n        {logout}\n        {Object.keys(this.props.fishes).map(key => (\n          <EditFishForm\n            key={key}\n            index={key}\n            fish={this.props.fishes[key]}\n            updateFish={this.props.updateFish}\n            deleteFish={this.props.deleteFish}\n          />\n        ))}\n        <AddFishForm addFish={this.props.addFish} />\n        <button onClick={this.props.loadSampleFishes}>\n          Load Sample Fishes\n        </button>\n      </div>\n    );\n  }\n}\n\nexport default Inventory;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}